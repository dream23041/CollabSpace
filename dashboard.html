<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç - CollabSpace</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/ui.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-code"></i>
                <span>CollabSpace</span>
            </div>
            <div class="nav-links" id="navLinks">
                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è JavaScript -->
            </div>
        </div>
    </nav>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="dashboard-container">
        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <aside class="sidebar">
            <div class="user-profile-sidebar">
                <div class="user-avatar">
                    <div class="avatar-placeholder" id="avatarPlaceholder">
                        <!-- –ê–≤–∞—Ç–∞—Ä–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                    </div>
                    <img src="" alt="–ê–≤–∞—Ç–∞—Ä" id="userAvatarImg" style="display: none;">
                </div>
                <div class="user-info">
                    <h3 id="sidebarUsername">–ó–∞–≥—Ä—É–∑–∫–∞...</h3>
                    <span class="user-status online">Online</span>
                </div>
            </div>

            <div class="sidebar-section">
                <h3>–†–∞–±–æ—á–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞</h3>
                <button class="sidebar-btn active" data-workspace="main">
                    <i class="fas fa-home"></i>
                    –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
                </button>
                <button class="sidebar-btn" data-workspace="new">
                    <i class="fas fa-plus"></i>
                    –ù–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
                </button>
            </div>

            <div class="sidebar-section">
                <h3>–ü—Ä–æ–µ–∫—Ç—ã</h3>
                <div class="project-list" id="projectList">
                    <!-- –ü—Ä–æ–µ–∫—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
                </div>
                <button class="sidebar-btn" id="createProjectBtn">
                    <i class="fas fa-plus"></i>
                    –ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
                </button>
            </div>

            <div class="sidebar-section">
                <h3>–ù–µ–¥–∞–≤–Ω–∏–µ —Ñ–∞–π–ª—ã</h3>
                <div class="recent-files" id="recentFiles">
                    <!-- –ù–µ–¥–∞–≤–Ω–∏–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </aside>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å -->
        <main class="main-content">
            <div class="content-header">
                <div class="header-left">
                    <h1 id="workspaceTitle">–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ</h1>
                    <p class="workspace-description">–í–∞—à–µ –æ—Å–Ω–æ–≤–Ω–æ–µ —Ä–∞–±–æ—á–µ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ</p>
                </div>
                <div class="header-actions">
                    <button class="btn primary" id="createFileBtn">
                        <i class="fas fa-plus"></i>
                        –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª
                    </button>
                    <button class="btn secondary" id="inviteBtn">
                        <i class="fas fa-user-plus"></i>
                        –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å
                    </button>
                </div>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-file-code"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="filesCount">0</h3>
                        <span>–§–∞–π–ª–æ–≤</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-project-diagram"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="projectsCount">0</h3>
                        <span>–ü—Ä–æ–µ–∫—Ç–æ–≤</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="collaboratorsCount">1</h3>
                        <span>–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="lastActive">–°–µ–≥–æ–¥–Ω—è</h3>
                        <span>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</span>
                    </div>
                </div>
            </div>

            <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
            <div class="quick-actions">
                <h2>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
                <div class="actions-grid">
                    <button class="action-card" data-action="create-file">
                        <div class="action-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <h3>–¢–µ–∫—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç</h3>
                        <p>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª</p>
                    </button>
                    <button class="action-card" data-action="create-code">
                        <div class="action-icon">
                            <i class="fas fa-code"></i>
                        </div>
                        <h3>–§–∞–π–ª –∫–æ–¥–∞</h3>
                        <p>–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞</p>
                    </button>
                    <button class="action-card" data-action="create-folder">
                        <div class="action-icon">
                            <i class="fas fa-folder"></i>
                        </div>
                        <h3>–ü–∞–ø–∫–∞</h3>
                        <p>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø–∞–ø–∫—É –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</p>
                    </button>
                    <button class="action-card" data-action="import-files">
                        <div class="action-icon">
                            <i class="fas fa-upload"></i>
                        </div>
                        <h3>–ò–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–æ–≤</h3>
                        <p>–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞</p>
                    </button>
                </div>
            </div>

            <!-- –ù–µ–¥–∞–≤–Ω–∏–µ —Ñ–∞–π–ª—ã -->
            <div class="recent-section">
                <div class="section-header">
                    <h2>–ù–µ–¥–∞–≤–Ω–∏–µ —Ñ–∞–π–ª—ã</h2>
                    <a href="#" class="view-all">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ</a>
                </div>
                <div class="files-table" id="recentFilesTable">
                    <!-- –§–∞–π–ª—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="createFileModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeCreateFile">&times;</span>
            <h2>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª</h2>
            <form id="createFileForm">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞</label>
                    <input type="text" id="fileName" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞" required>
                </div>
                
                <div class="form-group">
                    <label>–¢–∏–ø —Ñ–∞–π–ª–∞</label>
                    <div class="file-type-grid">
                        <div class="file-type-option" data-type="javascript">
                            <i class="fab fa-js-square"></i>
                            <span>JavaScript</span>
                            <small>.js</small>
                        </div>
                        <div class="file-type-option" data-type="html">
                            <i class="fab fa-html5"></i>
                            <span>HTML</span>
                            <small>.html</small>
                        </div>
                        <div class="file-type-option" data-type="css">
                            <i class="fab fa-css3-alt"></i>
                            <span>CSS</span>
                            <small>.css</small>
                        </div>
                        <div class="file-type-option" data-type="text">
                            <i class="fas fa-file-alt"></i>
                            <span>–¢–µ–∫—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç</span>
                            <small>.txt</small>
                        </div>
                        <div class="file-type-option" data-type="markdown">
                            <i class="fas fa-markdown"></i>
                            <span>Markdown</span>
                            <small>.md</small>
                        </div>
                        <div class="file-type-option" data-type="json">
                            <i class="fas fa-code"></i>
                            <span>JSON</span>
                            <small>.json</small>
                        </div>
                    </div>
                    <input type="hidden" id="fileType" required>
                </div>

                <div class="form-group">
                    <label>–ü—Ä–æ–µ–∫—Ç</label>
                    <select id="fileProject">
                        <option value="main">–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ</option>
                    </select>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn secondary" id="cancelCreateFile">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn primary">–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª</button>
                </div>
            </form>
        </div>
    </div>

    <div id="createProjectModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeCreateProject">&times;</span>
            <h2>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç</h2>
            <form id="createProjectForm">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞</label>
                    <input type="text" id="projectName" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞" required>
                </div>
                
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="projectDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"></textarea>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn secondary" id="cancelCreateProject">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn primary">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</button>
                </div>
            </form>
        </div>
    </div>

    <div id="profileModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeProfileModal">&times;</span>
            <h2>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
            <div class="profile-content">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <div class="avatar-placeholder">
                            <!-- –ë—É–∫–≤–∞ –∏–º–µ–Ω–∏ –±—É–¥–µ—Ç –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
                        </div>
                        <img src="" alt="–ê–≤–∞—Ç–∞—Ä" id="profileAvatarImg" style="display: none;">
                        <button class="change-avatar-btn">
                            <i class="fas fa-camera"></i>
                        </button>
                    </div>
                    <div class="profile-info">
                        <h3 id="profileUsername">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h3>
                        <p id="profileEmail">email@example.com</p>
                        <span class="member-since">–£—á–∞—Å—Ç–Ω–∏–∫ —Å <span id="memberSince">2024</span></span>
                    </div>
                </div>
                
                <div class="profile-stats">
                    <div class="profile-stat">
                        <strong id="profileFilesCount">0</strong>
                        <span>–§–∞–π–ª–æ–≤</span>
                    </div>
                    <div class="profile-stat">
                        <strong id="profileProjectsCount">0</strong>
                        <span>–ü—Ä–æ–µ–∫—Ç–æ–≤</span>
                    </div>
                    <div class="profile-stat">
                        <strong id="profileCollaborationsCount">0</strong>
                        <span>–ö–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–π</span>
                    </div>
                </div>

                <div class="profile-actions">
                    <button class="btn secondary" id="editProfileBtn">
                        <i class="fas fa-edit"></i>
                        –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                    </button>
                    <button class="btn secondary" id="changePasswordBtn">
                        <i class="fas fa-key"></i>
                        –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
    <div id="adminPanel" class="admin-panel" style="display: none;">
        <div class="admin-panel-content">
            <div class="admin-header">
                <h3><i class="fas fa-shield-alt"></i> –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å</h3>
                <button class="close-admin" onclick="AdminTools.closeAdminPanel()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div id="adminStats" class="admin-stats"></div>

            <!-- –ü–æ–∏—Å–∫ -->
            <div class="search-section">
                <div class="search-box">
                    <input type="text" id="adminSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, email..." 
                           onkeyup="AdminTools.searchUsers()">
                    <i class="fas fa-search"></i>
                </div>
                <button class="btn-small" onclick="AdminTools.showAllUsers()">
                    <i class="fas fa-list"></i> –í—Å–µ
                </button>
            </div>

            <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
            <div class="quick-admin-actions">
                <h4>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h4>
                <div class="action-buttons">
                    <button class="admin-btn" onclick="AdminTools.createAdvancedTestUser()">
                        <i class="fas fa-user-plus"></i> –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    </button>
                    <button class="admin-btn" onclick="AdminTools.createMultipleTestUsers()">
                        <i class="fas fa-users"></i> –°–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ
                    </button>
                    <button class="admin-btn" onclick="AdminTools.showUserActivity()">
                        <i class="fas fa-chart-bar"></i> –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
                    </button>
                    <button class="admin-btn" onclick="AdminTools.exportData('json')">
                        <i class="fas fa-download"></i> –≠–∫—Å–ø–æ—Ä—Ç JSON
                    </button>
                    <button class="admin-btn" onclick="AdminTools.exportData('csv')">
                        <i class="fas fa-file-csv"></i> –≠–∫—Å–ø–æ—Ä—Ç CSV
                    </button>
                    <button class="admin-btn danger" onclick="AdminTools.clearDatabase()">
                        <i class="fas fa-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å –±–∞–∑—É
                    </button>
                </div>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
            <div id="adminOutput" class="admin-output">
                <p class="placeholder">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–∏—Å–∫ –∏–ª–∏ –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</p>
            </div>
        </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/admin.js"></script>

    <!-- –í—Ä–µ–º–µ–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ -->
    <button onclick="AdminTools.toggleAdminPanel()" 
            style="position: fixed; bottom: 20px; right: 20px; z-index: 10000; background: red; color: white; padding: 10px;">
        üîß –ü–æ–∫–∞–∑–∞—Ç—å –∞–¥–º–∏–Ω–∫—É
    </button>
</body>
</html>
