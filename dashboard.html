<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Личный кабинет - CollabSpace</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/ui.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Навигационная панель -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-code"></i>
                <span>CollabSpace</span>
            </div>
            <div class="nav-links" id="navLinks">
                <!-- Заполняется JavaScript -->
            </div>
        </div>
    </nav>

    <!-- Основной контент -->
    <div class="dashboard-container">
        <!-- Боковая панель -->
        <aside class="sidebar">
            <div class="user-profile-sidebar">
                <div class="user-avatar">
                    <img src="https://via.placeholder.com/60" alt="Аватар" id="userAvatarImg">
                </div>
                <div class="user-info">
                    <h3 id="sidebarUsername">Пользователь</h3>
                    <span class="user-status online">Online</span>
                </div>
            </div>

            <div class="sidebar-section">
                <h3>Рабочие пространства</h3>
                <button class="sidebar-btn active" data-workspace="main">
                    <i class="fas fa-home"></i>
                    Главное пространство
                </button>
                <button class="sidebar-btn" data-workspace="new">
                    <i class="fas fa-plus"></i>
                    Новое пространство
                </button>
            </div>

            <div class="sidebar-section">
                <h3>Проекты</h3>
                <div class="project-list" id="projectList">
                    <!-- Проекты будут добавляться через JS -->
                </div>
                <button class="sidebar-btn" id="createProjectBtn">
                    <i class="fas fa-plus"></i>
                    Новый проект
                </button>
            </div>

            <div class="sidebar-section">
                <h3>Недавние файлы</h3>
                <div class="recent-files" id="recentFiles">
                    <!-- Недавние файлы будут добавляться через JS -->
                </div>
            </div>
        </aside>

        <!-- Основная область -->
        <main class="main-content">
            <div class="content-header">
                <div class="header-left">
                    <h1 id="workspaceTitle">Главное пространство</h1>
                    <p class="workspace-description">Ваше основное рабочее пространство</p>
                </div>
                <div class="header-actions">
                    <button class="btn primary" id="createFileBtn">
                        <i class="fas fa-plus"></i>
                        Создать файл
                    </button>
                    <button class="btn secondary" id="inviteBtn">
                        <i class="fas fa-user-plus"></i>
                        Пригласить
                    </button>
                </div>
            </div>

            <!-- Статистика -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-file-code"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="filesCount">0</h3>
                        <span>Файлов</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-project-diagram"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="projectsCount">0</h3>
                        <span>Проектов</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="collaboratorsCount">1</h3>
                        <span>Участников</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="lastActive">Сегодня</h3>
                        <span>Активность</span>
                    </div>
                </div>
            </div>

            <!-- Быстрые действия -->
            <div class="quick-actions">
                <h2>Быстрые действия</h2>
                <div class="actions-grid">
                    <button class="action-card" data-action="create-file">
                        <div class="action-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <h3>Текстовый документ</h3>
                        <p>Создать новый текстовый файл</p>
                    </button>
                    <button class="action-card" data-action="create-code">
                        <div class="action-icon">
                            <i class="fas fa-code"></i>
                        </div>
                        <h3>Файл кода</h3>
                        <p>Создать файл с подсветкой синтаксиса</p>
                    </button>
                    <button class="action-card" data-action="create-folder">
                        <div class="action-icon">
                            <i class="fas fa-folder"></i>
                        </div>
                        <h3>Папка</h3>
                        <p>Создать новую папку для организации</p>
                    </button>
                    <button class="action-card" data-action="import-files">
                        <div class="action-icon">
                            <i class="fas fa-upload"></i>
                        </div>
                        <h3>Импорт файлов</h3>
                        <p>Загрузить файлы с компьютера</p>
                    </button>
                </div>
            </div>

            <!-- Недавние файлы -->
            <div class="recent-section">
                <div class="section-header">
                    <h2>Недавние файлы</h2>
                    <a href="#" class="view-all">Показать все</a>
                </div>
                <div class="files-table" id="recentFilesTable">
                    <!-- Файлы будут добавляться через JS -->
                </div>
            </div>
        </main>
    </div>

    <!-- Модальные окна -->
    <div id="createFileModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeCreateFile">&times;</span>
            <h2>Создать новый файл</h2>
            <form id="createFileForm">
                <div class="form-group">
                    <label>Название файла</label>
                    <input type="text" id="fileName" placeholder="Введите название файла" required>
                </div>
                
                <div class="form-group">
                    <label>Тип файла</label>
                    <div class="file-type-grid">
                        <div class="file-type-option" data-type="javascript">
                            <i class="fab fa-js-square"></i>
                            <span>JavaScript</span>
                            <small>.js</small>
                        </div>
                        <div class="file-type-option" data-type="html">
                            <i class="fab fa-html5"></i>
                            <span>HTML</span>
                            <small>.html</small>
                        </div>
                        <div class="file-type-option" data-type="css">
                            <i class="fab fa-css3-alt"></i>
                            <span>CSS</span>
                            <small>.css</small>
                        </div>
                        <div class="file-type-option" data-type="text">
                            <i class="fas fa-file-alt"></i>
                            <span>Текстовый документ</span>
                            <small>.txt</small>
                        </div>
                        <div class="file-type-option" data-type="markdown">
                            <i class="fas fa-markdown"></i>
                            <span>Markdown</span>
                            <small>.md</small>
                        </div>
                        <div class="file-type-option" data-type="json">
                            <i class="fas fa-code"></i>
                            <span>JSON</span>
                            <small>.json</small>
                        </div>
                    </div>
                    <input type="hidden" id="fileType" required>
                </div>

                <div class="form-group">
                    <label>Проект</label>
                    <select id="fileProject">
                        <option value="main">Главное пространство</option>
                    </select>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn secondary" id="cancelCreateFile">Отмена</button>
                    <button type="submit" class="btn primary">Создать файл</button>
                </div>
            </form>
        </div>
    </div>

    <div id="createProjectModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeCreateProject">&times;</span>
            <h2>Создать новый проект</h2>
            <form id="createProjectForm">
                <div class="form-group">
                    <label>Название проекта</label>
                    <input type="text" id="projectName" placeholder="Введите название проекта" required>
                </div>
                
                <div class="form-group">
                    <label>Описание</label>
                    <textarea id="projectDescription" placeholder="Описание проекта (необязательно)"></textarea>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn secondary" id="cancelCreateProject">Отмена</button>
                    <button type="submit" class="btn primary">Создать проект</button>
                </div>
            </form>
        </div>
    </div>

    <div id="profileModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeProfileModal">&times;</span>
            <h2>Профиль пользователя</h2>
            <div class="profile-content">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <img src="https://via.placeholder.com/100" alt="Аватар" id="profileAvatarImg">
                        <button class="change-avatar-btn">
                            <i class="fas fa-camera"></i>
                        </button>
                    </div>
                    <div class="profile-info">
                        <h3 id="profileUsername">Пользователь</h3>
                        <p id="profileEmail">email@example.com</p>
                        <span class="member-since">Участник с <span id="memberSince">2024</span></span>
                    </div>
                </div>
                
                <div class="profile-stats">
                    <div class="profile-stat">
                        <strong id="profileFilesCount">0</strong>
                        <span>Файлов</span>
                    </div>
                    <div class="profile-stat">
                        <strong id="profileProjectsCount">0</strong>
                        <span>Проектов</span>
                    </div>
                    <div class="profile-stat">
                        <strong id="profileCollaborationsCount">0</strong>
                        <span>Коллабораций</span>
                    </div>
                </div>

                <div class="profile-actions">
                    <button class="btn secondary" id="editProfileBtn">
                        <i class="fas fa-edit"></i>
                        Редактировать профиль
                    </button>
                    <button class="btn secondary" id="changePasswordBtn">
                        <i class="fas fa-key"></i>
                        Сменить пароль
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>
